{"version":3,"file":"JsonViewer.es.js","sources":["../src/index.ts"],"sourcesContent":["import './styles.css';\r\n\r\ninterface JsonViewerOptions {\r\n    container: HTMLElement | null;\r\n    method?: string;\r\n    baseUrl?: string;\r\n    url?: string;\r\n    showHeader?: boolean;\r\n    data: any;\r\n    theme?: 'dark' | 'light'\r\n    expand?: boolean;\r\n  }\r\n  \r\n  export class JsonViewer {\r\n    options: JsonViewerOptions;\r\n  \r\n    constructor(options: JsonViewerOptions) {\r\n      const defaults: JsonViewerOptions = {\r\n        container: null,\r\n        method: '',\r\n        baseUrl: '',\r\n        url: '',\r\n        showHeader: true,\r\n        data: JSON.stringify({}),\r\n        theme: 'dark',\r\n        expand: false,\r\n      };\r\n      \r\n      this.options = { ...defaults, ...options };\r\n      this.options.data = JSON.stringify(this.options.data)\r\n      \r\n      if (this.isNull(this.options.container)) {\r\n        throw new Error('Container: DOM element is required');\r\n      }\r\n  \r\n      if(this.options.showHeader) {\r\n        this.createHeader();\r\n      } else {\r\n        this.createEmptyHeader()\r\n      }\r\n      const parsedData = this.parseData();\r\n      this.render(parsedData);\r\n    }\r\n  \r\n    parseData(): any {\r\n      \r\n      const data = this.options.data;\r\n      let dataObj: any;\r\n  \r\n      try {\r\n        dataObj = JSON.parse(data);\r\n      } catch (error) {\r\n        throw new Error('It is not a valid JSON format');\r\n      }\r\n  \r\n      return dataObj; // Return parsed data to be rendered\r\n    }\r\n\r\n    createHeader() {\r\n      const headerContainer = this.createElement('div');\r\n      headerContainer.className = 'json-viewer-header'; // Estilos opcionales\r\n  \r\n      // Genera el contenido del encabezado\r\n      const headerContent = `\r\n              <span class=\"method\">${this.options.method}</span>\r\n              <span class=\"baseUrl\">${this.options.baseUrl}</span>\r\n              <span class=\"url\">/${this.options.url}</span>\r\n      `;\r\n      headerContainer.innerHTML = headerContent;\r\n  \r\n      // Añade el encabezado al contenedor principal\r\n      this.options.container?.appendChild(headerContainer);\r\n  }\r\n\r\n  createEmptyHeader() {\r\n    const headerContainer = this.createElement('div');\r\n    headerContainer.className = 'json-viewer-empty-header';\r\n\r\n    // Añade el encabezado al contenedor principal\r\n    this.options.container?.appendChild(headerContainer);\r\n}\r\n  \r\n  \r\n    render(dataObj: any) {\r\n      const theme = 'jv-' + this.options.theme + '-';\r\n      const indent = 0;\r\n      const parent = this.options.container;\r\n      const key = '';\r\n  \r\n      parent?.setAttribute('class', theme + 'con');\r\n  \r\n      const { left, right } = this.createItem(indent, theme, parent, key);\r\n      this.renderChildren(theme, key, dataObj, right, indent, left);\r\n    }\r\n  \r\n    renderRight(theme: string, right: HTMLElement, val: any) {\r\n      if (this.isNumber(val)) {\r\n        right.setAttribute('class', theme + 'rightNumber');\r\n      } else if (this.isBoolean(val)) {\r\n        right.setAttribute('class', theme + 'rightBoolean');\r\n      } else if (val === 'null') {\r\n        right.setAttribute('class', theme + 'rightNull');\r\n      } else {\r\n        right.setAttribute('class', theme + 'rightString');\r\n      }\r\n  \r\n      right.innerText = this.isString(val) && val !== 'null' ? `\"${val}\"` : val;\r\n    }\r\n  \r\n    renderChildren(theme: string, key: string, val: any, right: HTMLElement, indent: number, left: HTMLElement) {\r\n      const folder = this.createElement('span');\r\n      const rotate90 = this.options.expand ? 'rotate90' : '';\r\n      const addHeight = this.options.expand ? 'add-height' : '';\r\n      folder.setAttribute('class', `${theme}folder ${rotate90}`);\r\n  \r\n      folder.onclick = (e: any) => {\r\n        const nextSibling = e.target.parentNode.nextSibling;\r\n        this.toggleItem(nextSibling, e.target);\r\n      };\r\n  \r\n      const len = this.isObject(val) ? Object.keys(val).length : val.length;\r\n      const isObj = !this.isArray(val);\r\n  \r\n      left.innerHTML = isObj\r\n        ? `<span class=\"${theme}left-text\">${key}</span><span class=\"${theme}symbol\">:</span> <span class=\"${theme}symbol\">{</span><span class=\"${theme}len\">&nbsp;${len}&nbsp;</span><span class=\"${theme}symbol\">}</span>`\r\n        : `<span class=\"${theme}left-text\">${key}</span><span class=\"${theme}symbol\">:</span> <span class=\"${theme}symbol\">[</span><span class=\"${theme}len\">&nbsp;${len}&nbsp;</span><span class=\"${theme}symbol\">]</span>`;\r\n  \r\n      left.prepend(folder);\r\n      const rightIs = isObj ? 'rightObj ' : 'rightArr ';\r\n      right.setAttribute('class', theme + rightIs + addHeight);\r\n  \r\n      this.parse(val, right, indent + 0, theme, isObj ? 'obj' : 'arr');\r\n    }\r\n  \r\n    parse(dataObj: any, parent: HTMLElement, indent: number, theme: string, thisIs: string) {\r\n      this.forEach(dataObj, (val: any, key: any) => {\r\n        const { left, right } = this.createItem(indent, theme, parent, key, typeof val !== 'object', thisIs);\r\n        if (typeof val !== 'object') {\r\n          this.renderRight(theme, right, val);\r\n        } else {\r\n          this.renderChildren(theme, key, val, right, indent, left);\r\n        }\r\n      });\r\n    }\r\n  \r\n    createItem(indent: number, theme: string, parent: HTMLElement | null, key: string, basicType: boolean = false, thisIs: string = '') {\r\n      const currentContainer = this.createElement('div'); // Contenedor para el elemento actual\r\n      currentContainer.classList.add('code-snippet')\r\n      const current = this.createElement('div');\r\n      const left = this.createElement('div');\r\n      const right = this.createElement('div');\r\n      const wrap = this.createElement('div');\r\n    \r\n      current.style.marginLeft = `${indent * 2}px`;\r\n      left.innerHTML = `<span class=\"${theme}left-text ${thisIs}-color\">${key}</span><span class=\"${theme}symbol\">${key === '' ? '' : ':&nbsp;'}</span>`;\r\n      \r\n      if (basicType) {\r\n        current.appendChild(wrap);\r\n        wrap.appendChild(left);\r\n        wrap.appendChild(right);\r\n        currentContainer.appendChild(current); // Añadir el elemento actual al contenedor\r\n        parent?.appendChild(currentContainer); // Añadir el contenedor al padre\r\n        current.setAttribute('class', theme + 'current');\r\n        wrap.setAttribute('class', 'jv-wrap');\r\n        left.setAttribute('class', theme + 'left');\r\n      } else {\r\n        current.appendChild(left);\r\n        current.appendChild(right);\r\n        currentContainer.appendChild(current); // Añadir el elemento actual al contenedor\r\n        parent?.appendChild(currentContainer); // Añadir el contenedor al padre\r\n        current.setAttribute('class', theme + 'current');\r\n        left.setAttribute('class', theme + 'left jv-folder');\r\n        left.onclick = (e: any) => {\r\n          const firstSpan = e.currentTarget.querySelector(`span.${theme}folder`);\r\n          const nextDiv = e.currentTarget.nextElementSibling;\r\n          this.toggleItem(nextDiv, firstSpan);\r\n        };\r\n      }\r\n    \r\n      return { left, right, current };\r\n    }\r\n    \r\n  \r\n    toggleItem(ele: HTMLElement, target: HTMLElement) {\r\n      ele.classList.toggle('add-height');\r\n      target.classList.toggle('rotate90');\r\n    }\r\n  \r\n    createElement(type: string) {\r\n      return document.createElement(type);\r\n    }\r\n  \r\n    forEach(obj: any, fn: Function) {\r\n      if (this.isUndefined(obj) || this.isNull(obj)) {\r\n        return;\r\n      }\r\n      if (this.isArray(obj)) {\r\n        for (let i = 0; i < obj.length; i++) {\r\n          fn.call(null, obj[i], i, obj);\r\n        }\r\n      } else {\r\n        for (let key in obj) {\r\n          if (obj.hasOwnProperty(key)) {\r\n            fn.call(null, obj[key] ?? 'null', key, obj);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  \r\n    // Type checking functions\r\n    isString(val: any) { return typeof val === 'string'; }\r\n    isNumber(val: any) { return typeof val === 'number'; }\r\n    isBoolean(val: any) { return typeof val === 'boolean'; }\r\n    isUndefined(val: any) { return typeof val === 'undefined'; }\r\n    isArray(val: any) { return Array.isArray(val); }\r\n    isObject(val: any) { return val !== null && typeof val === 'object'; }\r\n    isNull(val: any) { return val === null; }\r\n  }\r\n"],"names":["JsonViewer","options","defaults","parsedData","data","dataObj","_a","headerContainer","headerContent","theme","indent","parent","key","left","right","val","folder","rotate90","addHeight","e","nextSibling","len","isObj","rightIs","thisIs","basicType","currentContainer","current","wrap","firstSpan","nextDiv","ele","target","type","obj","fn","i"],"mappings":"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"}