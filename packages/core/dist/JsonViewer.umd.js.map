{"version":3,"file":"JsonViewer.umd.js","sources":["../src/index.ts"],"sourcesContent":["import './styles.css';\r\n\r\ninterface JsonViewerOptions {\r\n    container: HTMLElement | null;\r\n    method?: string;\r\n    baseUrl?: string;\r\n    url?: string;\r\n    showHeader?: boolean;\r\n    data: any;\r\n    theme?: 'dark' | 'light'\r\n    expand?: boolean;\r\n  }\r\n  \r\n  export default class JsonViewer {\r\n    options: JsonViewerOptions;\r\n  \r\n    constructor(options: JsonViewerOptions) {\r\n      const defaults: JsonViewerOptions = {\r\n        container: null,\r\n        method: '',\r\n        baseUrl: '',\r\n        url: '',\r\n        showHeader: true,\r\n        data: JSON.stringify({}),\r\n        theme: 'dark',\r\n        expand: false,\r\n      };\r\n      \r\n      this.options = { ...defaults, ...options };\r\n      this.options.data = JSON.stringify(this.options.data)\r\n      \r\n      if (this.isNull(this.options.container)) {\r\n        throw new Error('Container: DOM element is required');\r\n      }\r\n  \r\n      if(this.options.showHeader) {\r\n        this.createHeader();\r\n      } else {\r\n        this.createEmptyHeader()\r\n      }\r\n      const parsedData = this.parseData();\r\n      this.render(parsedData);\r\n    }\r\n  \r\n    parseData(): any {\r\n      \r\n      const data = this.options.data;\r\n      let dataObj: any;\r\n  \r\n      try {\r\n        dataObj = JSON.parse(data);\r\n      } catch (error) {\r\n        throw new Error('It is not a valid JSON format');\r\n      }\r\n  \r\n      return dataObj; // Return parsed data to be rendered\r\n    }\r\n\r\n    createHeader() {\r\n      const headerContainer = this.createElement('div');\r\n      headerContainer.className = 'json-viewer-header'; // Estilos opcionales\r\n  \r\n      // Genera el contenido del encabezado\r\n      const headerContent = `\r\n              <span class=\"method\">${this.options.method}</span>\r\n              <span class=\"baseUrl\">${this.options.baseUrl}</span>\r\n              <span class=\"url\">/${this.options.url}</span>\r\n      `;\r\n      headerContainer.innerHTML = headerContent;\r\n  \r\n      // Añade el encabezado al contenedor principal\r\n      this.options.container?.appendChild(headerContainer);\r\n  }\r\n\r\n  createEmptyHeader() {\r\n    const headerContainer = this.createElement('div');\r\n    headerContainer.className = 'json-viewer-empty-header';\r\n\r\n    // Añade el encabezado al contenedor principal\r\n    this.options.container?.appendChild(headerContainer);\r\n}\r\n  \r\n  \r\n    render(dataObj: any) {\r\n      const theme = 'jv-' + this.options.theme + '-';\r\n      const indent = 0;\r\n      const parent = this.options.container;\r\n      const key = '';\r\n  \r\n      parent?.setAttribute('class', theme + 'con');\r\n  \r\n      const { left, right } = this.createItem(indent, theme, parent, key);\r\n      this.renderChildren(theme, key, dataObj, right, indent, left);\r\n    }\r\n  \r\n    renderRight(theme: string, right: HTMLElement, val: any) {\r\n      if (this.isNumber(val)) {\r\n        right.setAttribute('class', theme + 'rightNumber');\r\n      } else if (this.isBoolean(val)) {\r\n        right.setAttribute('class', theme + 'rightBoolean');\r\n      } else if (val === 'null') {\r\n        right.setAttribute('class', theme + 'rightNull');\r\n      } else {\r\n        right.setAttribute('class', theme + 'rightString');\r\n      }\r\n  \r\n      right.innerText = this.isString(val) && val !== 'null' ? `\"${val}\"` : val;\r\n    }\r\n  \r\n    renderChildren(theme: string, key: string, val: any, right: HTMLElement, indent: number, left: HTMLElement) {\r\n      const folder = this.createElement('span');\r\n      const rotate90 = this.options.expand ? 'rotate90' : '';\r\n      const addHeight = this.options.expand ? 'add-height' : '';\r\n      folder.setAttribute('class', `${theme}folder ${rotate90}`);\r\n  \r\n      folder.onclick = (e: any) => {\r\n        const nextSibling = e.target.parentNode.nextSibling;\r\n        this.toggleItem(nextSibling, e.target);\r\n      };\r\n  \r\n      const len = this.isObject(val) ? Object.keys(val).length : val.length;\r\n      const isObj = !this.isArray(val);\r\n  \r\n      left.innerHTML = isObj\r\n        ? `<span class=\"${theme}left-text\">${key}</span><span class=\"${theme}symbol\">:</span> <span class=\"${theme}symbol\">{</span><span class=\"${theme}len\">&nbsp;${len}&nbsp;</span><span class=\"${theme}symbol\">}</span>`\r\n        : `<span class=\"${theme}left-text\">${key}</span><span class=\"${theme}symbol\">:</span> <span class=\"${theme}symbol\">[</span><span class=\"${theme}len\">&nbsp;${len}&nbsp;</span><span class=\"${theme}symbol\">]</span>`;\r\n  \r\n      left.prepend(folder);\r\n      const rightIs = isObj ? 'rightObj ' : 'rightArr ';\r\n      right.setAttribute('class', theme + rightIs + addHeight);\r\n  \r\n      this.parse(val, right, indent + 0, theme, isObj ? 'obj' : 'arr');\r\n    }\r\n  \r\n    parse(dataObj: any, parent: HTMLElement, indent: number, theme: string, thisIs: string) {\r\n      this.forEach(dataObj, (val: any, key: any) => {\r\n        const { left, right } = this.createItem(indent, theme, parent, key, typeof val !== 'object', thisIs);\r\n        if (typeof val !== 'object') {\r\n          this.renderRight(theme, right, val);\r\n        } else {\r\n          this.renderChildren(theme, key, val, right, indent, left);\r\n        }\r\n      });\r\n    }\r\n  \r\n    createItem(indent: number, theme: string, parent: HTMLElement | null, key: string, basicType: boolean = false, thisIs: string = '') {\r\n      const currentContainer = this.createElement('div'); // Contenedor para el elemento actual\r\n      currentContainer.classList.add('code-snippet')\r\n      const current = this.createElement('div');\r\n      const left = this.createElement('div');\r\n      const right = this.createElement('div');\r\n      const wrap = this.createElement('div');\r\n    \r\n      current.style.marginLeft = `${indent * 2}px`;\r\n      left.innerHTML = `<span class=\"${theme}left-text ${thisIs}-color\">${key}</span><span class=\"${theme}symbol\">${key === '' ? '' : ':&nbsp;'}</span>`;\r\n      \r\n      if (basicType) {\r\n        current.appendChild(wrap);\r\n        wrap.appendChild(left);\r\n        wrap.appendChild(right);\r\n        currentContainer.appendChild(current); // Añadir el elemento actual al contenedor\r\n        parent?.appendChild(currentContainer); // Añadir el contenedor al padre\r\n        current.setAttribute('class', theme + 'current');\r\n        wrap.setAttribute('class', 'jv-wrap');\r\n        left.setAttribute('class', theme + 'left');\r\n      } else {\r\n        current.appendChild(left);\r\n        current.appendChild(right);\r\n        currentContainer.appendChild(current); // Añadir el elemento actual al contenedor\r\n        parent?.appendChild(currentContainer); // Añadir el contenedor al padre\r\n        current.setAttribute('class', theme + 'current');\r\n        left.setAttribute('class', theme + 'left jv-folder');\r\n        left.onclick = (e: any) => {\r\n          const firstSpan = e.currentTarget.querySelector(`span.${theme}folder`);\r\n          const nextDiv = e.currentTarget.nextElementSibling;\r\n          this.toggleItem(nextDiv, firstSpan);\r\n        };\r\n      }\r\n    \r\n      return { left, right, current };\r\n    }\r\n    \r\n  \r\n    toggleItem(ele: HTMLElement, target: HTMLElement) {\r\n      ele.classList.toggle('add-height');\r\n      target.classList.toggle('rotate90');\r\n    }\r\n  \r\n    createElement(type: string) {\r\n      return document.createElement(type);\r\n    }\r\n  \r\n    forEach(obj: any, fn: Function) {\r\n      if (this.isUndefined(obj) || this.isNull(obj)) {\r\n        return;\r\n      }\r\n      if (this.isArray(obj)) {\r\n        for (let i = 0; i < obj.length; i++) {\r\n          fn.call(null, obj[i], i, obj);\r\n        }\r\n      } else {\r\n        for (let key in obj) {\r\n          if (obj.hasOwnProperty(key)) {\r\n            fn.call(null, obj[key] ?? 'null', key, obj);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  \r\n    // Type checking functions\r\n    isString(val: any) { return typeof val === 'string'; }\r\n    isNumber(val: any) { return typeof val === 'number'; }\r\n    isBoolean(val: any) { return typeof val === 'boolean'; }\r\n    isUndefined(val: any) { return typeof val === 'undefined'; }\r\n    isArray(val: any) { return Array.isArray(val); }\r\n    isObject(val: any) { return val !== null && typeof val === 'object'; }\r\n    isNull(val: any) { return val === null; }\r\n  }\r\n"],"names":["JsonViewer","options","defaults","parsedData","data","dataObj","headerContainer","headerContent","_a","theme","indent","parent","key","left","right","val","folder","rotate90","addHeight","e","nextSibling","len","isObj","rightIs","thisIs","basicType","currentContainer","current","wrap","firstSpan","nextDiv","ele","target","type","obj","fn","i"],"mappings":"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"}